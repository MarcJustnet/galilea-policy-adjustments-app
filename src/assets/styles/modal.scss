/* Modal Component Styles */
@use './variables' as *;

.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 1000;
    display: none;
    justify-content: center;
    align-items: center;
    opacity: 0;
    visibility: hidden;
    transition:
        opacity 0.3s ease,
        visibility 0.3s ease;

    /* Modal Open State */
    &--open {
        display: flex;
        opacity: 1;
        visibility: visible;

        .modal__content {
            transform: scale(1);
            outline: none;
        }
    }

    /* Alternative Animation States */
    &--opening {
        .modal__content {
            animation: modalFadeIn 0.3s ease forwards;
        }
    }

    &--closing {
        .modal__content {
            animation: modalFadeOut 0.3s ease forwards;
        }
    }

    /* Modal Backdrop */
    &__backdrop {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(2px);
        cursor: pointer;
        transition: background-color 0.3s ease;

        @media (prefers-contrast: high) {
            background-color: rgba(0, 0, 0, 0.8);
        }
    }

    /* Modal Content Container */
    &__content {
        position: relative;
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        max-width: 90vw;
        max-height: 90vh;
        overflow: auto;
        z-index: 1001;
        transform: scale(0.7);
        transition: transform 0.3s ease;

        /* Responsive Design */
        @media (max-width: 768px) {
            max-width: 600px;
        }

        @media (max-width: 1024px) {
            max-width: 800px;
        }

        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            border: 2px solid #000;
        }

        /* Scrollbar Styling */
        &::-webkit-scrollbar {
            width: 6px;
        }

        &::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        &::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;

            &:hover {
                background: #a8a8a8;
            }
        }
    }

    /* Modal Header */
    &__header {
        padding: $spacing-2xl;
        padding-top: $spacing-lg;
        text-align: center;
        border-bottom: 1px solid $border-light;

        svg {
            margin-bottom: $spacing-lg;
        }

        &--password-update {
            padding: $spacing-sm;
            padding-top: $spacing-lg;
        }
    }

    &__title {
        margin: 0 0 $spacing-sm 0;
        font-size: $font-2xl;
        font-weight: $font-bold;
        color: $text-primary;
    }

    &__description {
        margin: 0;
        font-size: $font-base;
        color: $text-muted;
    }

    /* Modal Body */
    &__body {
        padding: $spacing-xl;
        padding-top: $spacing-md;
    }

    /* Modal Footer */
    &__footer {
        padding: $spacing-lg;
        border-top: 1px solid $border-light;
        display: flex;
        justify-content: flex-end;
        gap: $spacing-md;
    }

    /* Reduced Motion Support */
    @media (prefers-reduced-motion: reduce) {
        &,
        &__content,
        &__backdrop {
            transition: none;
        }

        &--opening .modal__content,
        &--closing .modal__content {
            animation: none;
        }
    }
}

/* Animation Keyframes */
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: scale(0.7);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes modalFadeOut {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.7);
    }
}

/* Prevent Body Scroll when Modal is Open */
body.modal-open {
    overflow: hidden;
}
